<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Chapter&#160;13.&#160;quince_sqlite</title>
<link rel="stylesheet" href="boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="index.html" title="QUINCE: QUeries IN C++ Expressions">
<link rel="up" href="the_back_end_libraries.html" title="Part&#160;III.&#160;The Back-End Libraries">
<link rel="prev" href="quince_postgresql/mappers.html" title="Default mappers">
<link rel="next" href="quince_sqlite/basic.html" title="Basic conversions">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="spirit-nav">
<a accesskey="p" href="quince_postgresql/mappers.html"><img src="images/prev.png" alt="Prev"></a><a accesskey="u" href="the_back_end_libraries.html"><img src="images/up.png" alt="Up"></a><a accesskey="h" href="index.html"><img src="images/home.png" alt="Home"></a><a accesskey="n" href="quince_sqlite/basic.html"><img src="images/next.png" alt="Next"></a>
</div>
<div class="chapter">
<div class="titlepage"><div><div><h2 class="title">
<a name="quince_sqlite"></a>Chapter&#160;13.&#160;quince_sqlite</h2></div></div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl class="toc">
<dt><span class="section"><a href="quince_sqlite.html#quince_sqlite.constructor">The <code class="computeroutput"><span class="identifier">quince_sqlite</span><span class="special">::</span><span class="identifier">database</span></code>
        constructor</a></span></dt>
<dt><span class="section"><a href="quince_sqlite/basic.html">Basic conversions</a></span></dt>
<dt><span class="section"><a href="quince_sqlite/mappers.html">Default mappers</a></span></dt>
</dl>
</div>
<p>
        
      </p>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="quince_sqlite.constructor"></a><a class="link" href="quince_sqlite.html#quince_sqlite.constructor" title="The quince_sqlite::database constructor">The <code class="computeroutput"><span class="identifier">quince_sqlite</span><span class="special">::</span><span class="identifier">database</span></code>
        constructor</a>
</h2></div></div></div>
<p>
          The <code class="computeroutput"><span class="identifier">quince_sqlite</span></code> library's
          <span class="emphasis"><em>application</em></span> program interface (API) is very small,
          because almost all calls into <code class="computeroutput"><span class="identifier">quince_sqlite</span></code>
          are made by quince, not by application code.
        </p>
<p>
          In fact, application code only mentions one of <code class="computeroutput"><span class="identifier">quince_sqlite</span></code>'s
          entry-points: the <code class="computeroutput"><span class="identifier">quince_sqlite</span><span class="special">::</span><span class="identifier">database</span></code>
          constructor. After that, the application asks <span class="emphasis"><em>quince</em></span>
          to create tables, it asks <span class="emphasis"><em>quince</em></span> to build and execute
          queries, manipulate data, etc. All the while, behind the scenes, references
          to the <code class="computeroutput"><span class="identifier">quince_sqlite</span><span class="special">::</span><span class="identifier">database</span></code> object are being passed via
          constructors from tables to queries to value mappers, and so on, so quince
          always knows which backend library to use, and it makes frequent use of
          quince_sqlite functions that are not part of its API.
        </p>
<p>
          With that in mind, I present the complete API of quince_sqlite: the <code class="computeroutput"><span class="identifier">quince_sqlite</span><span class="special">::</span><span class="identifier">database</span></code> constructor.
        </p>
<p>
          It is available via:
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">quince_sqlite</span><span class="special">/</span><span class="identifier">database</span><span class="special">.</span><span class="identifier">h</span><span class="special">&gt;</span>
</pre>
<p>
          and its prototype is:
        </p>
<pre class="programlisting"><span class="identifier">database</span><span class="special">(</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="identifier">filename</span><span class="special">,</span>
    <span class="keyword">bool</span> <span class="identifier">may_write</span> <span class="special">=</span> <span class="keyword">true</span><span class="special">,</span>
    <span class="keyword">bool</span> <span class="identifier">mutex</span> <span class="special">=</span> <span class="keyword">true</span><span class="special">,</span>
    <span class="keyword">bool</span> <span class="identifier">share_cache</span> <span class="special">=</span> <span class="keyword">true</span><span class="special">,</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">optional</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;</span> <span class="identifier">vfs_module_name</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">none</span><span class="special">,</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">optional</span><span class="special">&lt;</span><span class="keyword">const</span> <span class="identifier">quince</span><span class="special">::</span><span class="identifier">mapping_customization</span> <span class="special">&amp;&gt;</span> <span class="identifier">customization_for_db</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">none</span><span class="special">,</span>
    <span class="keyword">const</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">filesystem</span><span class="special">::</span><span class="identifier">path</span><span class="special">&gt;</span> <span class="special">&amp;</span><span class="identifier">attachable_database_filenames</span> <span class="special">=</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">filesystem</span><span class="special">::</span><span class="identifier">path</span><span class="special">&gt;()</span>
<span class="special">);</span>
</pre>
<p>
          Most of the arguments are information that quince_sqlite will use each
          time it creates a connection to the database:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
              <code class="computeroutput"><span class="identifier">filename</span></code> is the UTF-8
              name of the file that holds that database.
            </li>
<li class="listitem">
              If <code class="computeroutput"><span class="identifier">may_write</span></code> is true,
              then the database is opened for writing if the operating system allows
              it. In any case it is opened for reading, if the operating system allows
              it.
            </li>
<li class="listitem">
              If <code class="computeroutput"><span class="identifier">mutex</span></code> is true, then
              the connection opens in the serialized <a href="http://www.sqlite.org/threadsafe.html" target="_top">threading
              mode</a>; otherwise it opens in the multi-thread threading mode.
            </li>
<li class="listitem">
              If <code class="computeroutput"><span class="identifier">share_cache</span></code> is true
              then the connection can used <a href="http://www.sqlite.org/sharedcache.html" target="_top">shared
              cache mode</a>, otherwise it does not participate in shared cache
              mode.
            </li>
<li class="listitem">
              If <code class="computeroutput"><span class="identifier">vfs_module_name</span></code>,
              if supplied, it is the name of an <a href="http://www.sqlite.org/c3ref/vfs.html" target="_top"><code class="computeroutput"><span class="identifier">sqlite_vfs</span></code></a> object that defines
              the the OS interface that the new connection will use. If it is not
              supplied then sqlite provides a default <code class="computeroutput"><span class="identifier">sqlite_vfs</span></code>
              object.
            </li>
</ul></div>
<p>
          <a name="filename_map"></a><code class="computeroutput"><span class="identifier">filename_map</span></code>
          is a map to translate attached database names, as used as the first part
          of <a class="link" href="tables/construction.html#binomen">two-part quince table names</a>, into the
          names of actual files that hold those databases. Any name that cannot be
          found in the table will be used as the filename without any translation.
        </p>
<p>
          <code class="computeroutput"><span class="identifier">customization_for_db</span></code> is
          used to deploy custom mappings throughout the database, as described <a class="link" href="custom/deployment.html#custom.deployment.database" title="To a Database ...">here</a>.
        </p>
<p>
          If you are setting custom mappings for the database, or if you intend to
          add custom mappings for any tables in the database, then you need to read
          the rest of this chapter. Otherwise your study of the quince_sqlite library
          is complete.
        </p>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2014 Michael Shepanski<p>
        Distributed under the Boost Software License, Version 1.0
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="quince_postgresql/mappers.html"><img src="images/prev.png" alt="Prev"></a><a accesskey="u" href="the_back_end_libraries.html"><img src="images/up.png" alt="Up"></a><a accesskey="h" href="index.html"><img src="images/home.png" alt="Home"></a><a accesskey="n" href="quince_sqlite/basic.html"><img src="images/next.png" alt="Next"></a>
</div>
</body>
</html>
